<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html>
<body margin:0>

<style>

.prevent-select {

    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;

}


#startButton{

    border-radius: 15px;
    background-color: #04AA6d;
    box-shadow: 0 7px #06764b;
    color: #fff;
    font-size: 30px;
    display: block;
}
#startButton:hover{background-color: #3e8e41}
#startButton:active{

    background-color: #3e8e41;
    box-shadow: 0 5px #066c45;
    transform:translateY(4px);

}


#restartButton{

display: none;
border-radius: 15px;
background-color: #FF0000;
box-shadow: 0 7px #a10606;
color: #fff;
font-size: 30px;
display: block;
}
#restartButton:hover{background-color: #ce1515}
#restartButton:active{

background-color: #ce1515;
box-shadow: 0 5px #a10606;
transform:translateY(4px);

}

.modal-body {padding: 2px 16px;}

.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 10; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  position: relative;
  background-color:#ffffff;
  margin: auto;
  padding: 0;
  border: 1px solid #888;
  width: 60%;
  height: 10%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  -webkit-animation-name: animatetop;
  -webkit-animation-duration: 0.4s;
  animation-name: animatetop;
  animation-duration: 0.4s;
  border-radius: 50px;
}

/* Add Animation */
@-webkit-keyframes animatetop {
  from {top:-300px; opacity:0} 
  to {top:0; opacity:1}
}

@keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

</style>

<h1 style="text-align: center;" class="prevent-select">Tic Tac Toe Game</h1>

<div style="width: 500px; height: 500px; background-color: rgb(221, 221, 221); margin: auto; border-radius: 20px;" class="prevent-select">

<img src="TicTacToeBoardTemplate.png" alt="Tic tac toe board template" style="z-index: 2; position: absolute; padding-top: 8px; padding-left: 16px;" usemap="#workmap" >

<img src="GamePieceX.png" alt="GamePieceX1" style="width: 100px; padding-left: 35px; padding-top: 45px; display: none; position: absolute;" id="GamePieceX1">
<img src="GamePieceX.png" alt="GamePieceX2" style="width: 100px; padding-left: 200px; padding-top: 45px; display: none; position: absolute;" id="GamePieceX2">
<img src="GamePieceX.png" alt="GamePieceX3" style="width: 100px; padding-left: 365px; padding-top: 45px; display: none; position: absolute;" id="GamePieceX3">

<img src="GamePieceX.png" alt="GamePieceX4" style="width: 100px; padding-left: 35px; padding-top: 200px; display: none; position: absolute;" id="GamePieceX4">
<img src="GamePieceX.png" alt="GamePieceX5" style="width: 100px; padding-left: 200px; padding-top: 200px; display: none; position: absolute;" id="GamePieceX5">
<img src="GamePieceX.png" alt="GamePieceX6" style="width: 100px; padding-left: 365px; padding-top: 200px; display: none; position: absolute;" id="GamePieceX6">

<img src="GamePieceX.png" alt="GamePieceX7" style="width: 100px; padding-left: 35px; padding-top: 355px; display: none; position: absolute;" id="GamePieceX7">
<img src="GamePieceX.png" alt="GamePieceX8" style="width: 100px; padding-left: 200px; padding-top: 355px; display: none; position: absolute;" id="GamePieceX8">
<img src="GamePieceX.png" alt="GamePieceX9" style="width: 100px; padding-left: 365px; padding-top: 355px; display: none; position: absolute;" id="GamePieceX9">



<img src="GamePieceO.png" alt="GamePieceX1" style="width: 100px; padding-left: 35px; padding-top: 45px; display: none; position: absolute;" id="GamePieceO1">
<img src="GamePieceO.png" alt="GamePieceX2" style="width: 100px; padding-left: 200px; padding-top: 45px; display: none; position: absolute;" id="GamePieceO2">
<img src="GamePieceO.png" alt="GamePieceX3" style="width: 100px; padding-left: 365px; padding-top: 45px; display: none; position: absolute;" id="GamePieceO3">

<img src="GamePieceO.png" alt="GamePieceX1" style="width: 100px; padding-left: 35px; padding-top: 200px; display: none; position: absolute;" id="GamePieceO4">
<img src="GamePieceO.png" alt="GamePieceX2" style="width: 100px; padding-left: 200px; padding-top: 200px; display: none; position: absolute;" id="GamePieceO5">
<img src="GamePieceO.png" alt="GamePieceX3" style="width: 100px; padding-left: 365px; padding-top: 200px; display: none; position: absolute;" id="GamePieceO6">

<img src="GamePieceO.png" alt="GamePieceX1" style="width: 100px; padding-left: 35px; padding-top: 355px; display: none; position: absolute;" id="GamePieceO7">
<img src="GamePieceO.png" alt="GamePieceX2" style="width: 100px; padding-left: 200px; padding-top: 355px; display: none; position: absolute;" id="GamePieceO8">
<img src="GamePieceO.png" alt="GamePieceX3" style="width: 100px; padding-left: 365px; padding-top: 355px; display: none; position: absolute;" id="GamePieceO9">

</div>

<button id="startButton" style="width: 200px; height: 50px; top: 800px; margin: 10px auto;" onclick="document.getElementById('startButton').style.display='none';" class="prevent-select">Start</button>
<button id="restartButton" style="width: 200px; height: 50px; top: 800px; margin: 10px auto; display: none;" onclick="RestartGame();" class="prevent-select">Restart</button>


<map name="workmap">

    <area shape="rect" coords="158,165,2,0" alt="Square 1" onclick="ValidateUserInput('Square1')">
    <area shape="rect" coords="319, 162, 176, -1" alt="Square 2" onclick="ValidateUserInput('Square2')">
    <area shape="rect" coords="465, 155, 335, 0" alt="Square 3" onclick="ValidateUserInput('Square3')">
    <area shape="rect" coords="0, 173, 160, 313" alt="Square 4" onclick="ValidateUserInput('Square4')">
    <area shape="rect" coords="169, 167, 310, 311" alt="Square 5" onclick="ValidateUserInput('Square5')">
    <area shape="rect" coords="324, 167, 465, 311" alt="Square 6" onclick="ValidateUserInput('Square6')">
    <area shape="rect" coords="-1, 328, 142, 480" alt="Square 7" onclick="ValidateUserInput('Square7')">
    <area shape="rect" coords="174, 326, 306, 480" alt="Square 8" onclick="ValidateUserInput('Square8')">
    <area shape="rect" coords="333, 325, 465, 479" alt="Square 9" onclick="ValidateUserInput('Square9')">

</map>


<div id="Modal-box" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <div class="modal-body">
        <p style="text-align: center; font-size: 30px;" id="Message" class="prevent-select">It's a draw!</p>
      </div>
    </div>
  
  </div>



<script>

var modal=document.getElementById("Modal-box");

window.onclick=function(event) {
    if(event.target==modal) {
        modal.style.display="none";
        document.getElementById("restartButton").style.display="block";
    }
}

window.Turn=0;
window.MainBoard=[

    [0,0,0],
    [0,0,0],
    [0,0,0]

]


function RestartGame() {

    document.getElementById("restartButton").style.display="none";
    MainBoard=[
        
        [0,0,0],
        [0,0,0],
        [0,0,0]
    
    ]
    Turn=0;
    UpdateTicTacToeBoardUI(MainBoard);
}


function ValidateUserInput(Square) {

    if (Turn%2==0 && document.getElementById("startButton").style.display=="none") {

        if (Square=="Square1" && MainBoard[0][0]==0) {
            MainBoard[0][0]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square2" && MainBoard[0][1]==0) {
            MainBoard[0][1]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square3" && MainBoard[0][2]==0) {
            MainBoard[0][2]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square4" && MainBoard[1][0]==0) {
            MainBoard[1][0]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square5" && MainBoard[1][1]==0) {
            MainBoard[1][1]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square6" && MainBoard[1][2]==0) {
            MainBoard[1][2]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square7" && MainBoard[2][0]==0) {
            MainBoard[2][0]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square8" && MainBoard[2][1]==0) {
            MainBoard[2][1]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
        else if (Square=="Square9" && MainBoard[2][2]==0) {
            MainBoard[2][2]=1;
            Turn+=1;
            UpdateTicTacToeBoardUI(MainBoard);
            CallGameBoard(MainBoard);
        }
    }
}


function CallGameBoard(Board) {

    var array={mainBoard:Board};

    var xhttp=new XMLHttpRequest();
    xhttp.open("POST", "/data");
    xhttp.setRequestHeader("Content-Type","application/json");
    xhttp.send(JSON.stringify(array));
    console.log("The request for the gameboard has been sent!");

    xhttp.onreadystatechange=function() {
        if (this.readyState==4 && this.status==200) {

            ResponseText=this.responseText;
            if (ResponseText.indexOf("draw") >=0) {

                document.getElementById("Message").innerHTML="It's a draw!";
                document.getElementById("Modal-box").style.display="block";
                
            }
            if (ResponseText.indexOf("computer") >=0) {
                document.getElementById("Message").innerHTML="The computer has won!";
                document.getElementById("Modal-box").style.display="block";
            }
            if (ResponseText.indexOf("player") >=0) {
                document.getElementById("Message").innerHTML="The player has won!";
                document.getElementById("Modal-box").style.display="block";
            }

            GameBoard=ResponseText;
            ConvertGameBoardTextIntoArray(GameBoard);
            Turn+=1;

        }
    }
}

function ConvertGameBoardTextIntoArray(GameBoard) {

    //[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
    Board=[];

    Row1=[];
    Row2=[];
    Row3=[];

    count=0
    for (var index in GameBoard) {

        integer="";
        element=GameBoard[index];
        if (element=="0" || element=="1" || element=="2") {

            if (element=="0") {
                integer=0;
            }
            else if (element=="1") {
                integer=1;
            }
            else if (element=="2") {
                integer=2;
            }

            count+=1;
            if (count<=3) {
                Row1.push(integer);   
            }
            else if(count<=6 && count>3) {
                Row2.push(integer);
            }
            else if(count>6 && count<=9) {
                Row3.push(integer);
            }
        }
    }
    Board.push(Row1);
    Board.push(Row2);
    Board.push(Row3);
    UpdateTicTacToeBoardUI(Board);
}




function UpdateTicTacToeBoardUI(Board) {
    /*
    Board Matrix

    Board=[
    [0, 0, 0],
    [0, 0, 0],
    [0, 0, 0]
    ]
    */ 

    //Updating the main board
    MainBoard=Board;

    //Updating the board for the player's occupancy
    if (Board[0][0]==1) {
        document.getElementById("GamePieceX1").style.display="block";
    }
    if (Board[0][1]==1) {
        document.getElementById("GamePieceX2").style.display="block";
    }
    if (Board[0][2]==1) {
        document.getElementById("GamePieceX3").style.display="block";
    }
    if (Board[1][0]==1) {
        document.getElementById("GamePieceX4").style.display="block";
    }
    if (Board[1][1]==1) {
        document.getElementById("GamePieceX5").style.display="block";
    }
    if (Board[1][2]==1) {
        document.getElementById("GamePieceX6").style.display="block";
    }
    if (Board[2][0]==1) {
        document.getElementById("GamePieceX7").style.display="block";
    }
    if (Board[2][1]==1) {
        document.getElementById("GamePieceX8").style.display="block";
    }
    if (Board[2][2]==1) {
        document.getElementById("GamePieceX9").style.display="block";
    }






    //Updating the board for the computer's occupancy
    if (Board[0][0]==2) {
        document.getElementById("GamePieceO1").style.display="block";
    }
    if (Board[0][1]==2) {
        document.getElementById("GamePieceO2").style.display="block";
    }
    if (Board[0][2]==2) {
        document.getElementById("GamePieceO3").style.display="block";
    }
    if (Board[1][0]==2) {
        document.getElementById("GamePieceO4").style.display="block";
    }
    if (Board[1][1]==2) {
        document.getElementById("GamePieceO5").style.display="block";
    }
    if (Board[1][2]==2) {
        document.getElementById("GamePieceO6").style.display="block";
    }
    if (Board[2][0]==2) {
        document.getElementById("GamePieceO7").style.display="block";
    }
    if (Board[2][1]==2) {
        document.getElementById("GamePieceO8").style.display="block";
    }
    if (Board[2][2]==2) {
        document.getElementById("GamePieceO9").style.display="block";
    }






    //Updating the board for no occupancy (to restart the game)
    if (Board[0][0]==0) {
        document.getElementById("GamePieceO1").style.display="none";
        document.getElementById("GamePieceX1").style.display="none";
    }
    if (Board[0][1]==0) {
        document.getElementById("GamePieceO2").style.display="none";
        document.getElementById("GamePieceX2").style.display="none";
    }
    if (Board[0][2]==0) {
        document.getElementById("GamePieceO3").style.display="none";
        document.getElementById("GamePieceX3").style.display="none";
    }
    if (Board[1][0]==0) {
        document.getElementById("GamePieceO4").style.display="none";
        document.getElementById("GamePieceX4").style.display="none";
    }
    if (Board[1][1]==0) {
        document.getElementById("GamePieceO5").style.display="none";
        document.getElementById("GamePieceX5").style.display="none";
    }
    if (Board[1][2]==0) {
        document.getElementById("GamePieceO6").style.display="none";
        document.getElementById("GamePieceX6").style.display="none";
    }
    if (Board[2][0]==0) {
        document.getElementById("GamePieceO7").style.display="none";
        document.getElementById("GamePieceX7").style.display="none";
    }
    if (Board[2][1]==0) {
        document.getElementById("GamePieceO8").style.display="none";
        document.getElementById("GamePieceX8").style.display="none";
    }
    if (Board[2][2]==0) {
        document.getElementById("GamePieceO9").style.display="none";
        document.getElementById("GamePieceX9").style.display="none";
    }
}


</script>


</body>
</html>